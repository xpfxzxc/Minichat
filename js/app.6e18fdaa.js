(function(e){function t(t){for(var r,o,i=t[0],l=t[1],u=t[2],s=0,f=[];s<i.length;s++)o=i[s],a[o]&&f.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);p&&p(t);while(f.length)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(c.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},o={app:0},a={app:0},c=[];function i(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-74a6d4fc":"115c1b0a","chunk-932335c4":"4f69d650"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-74a6d4fc":1,"chunk-932335c4":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-74a6d4fc":"60bdaa8c","chunk-932335c4":"3a84d874"}[e]+".css",a=l.p+r,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var u=c[i],s=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(s===r||s===a))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){u=f[i],s=u.getAttribute("data-href");if(s===r||s===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete o[e],p.parentNode.removeChild(p),n(c)},p.href=a;var d=document.getElementsByTagName("head")[0];d.appendChild(p)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=c);var u,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=i(e),u=function(t){s.onerror=s.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");c.type=r,c.request=o,n[1](c)}a[e]=void 0}};var f=setTimeout(function(){u({type:"timeout",target:s})},12e4);s.onerror=s.onload=u,document.head.appendChild(s)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/Minichat/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var p=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},4084:function(e,t,n){},"4fde":function(e,t,n){"use strict";var r=n("4084"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("keep-alive",{attrs:{include:e.cachedViews}},[n("router-view")],1)],1)},a=[],c={data:function(){return{cachedViews:[]}}},i=c,l=(n("7c55"),n("2877")),u=Object(l["a"])(i,o,a,!1,null,null,null),s=u.exports,f=(n("7f7f"),n("6762"),n("2fdb"),n("8c4f")),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"splash"},[r("img",{attrs:{alt:"Minichat welcome",src:n("cb4f")}}),r("div",{staticClass:"redirect"},[r("span",{staticClass:"unselectable",on:{click:e.redirect}},[e._v("跳转 | "+e._s(e.second)+"s")])]),e._m(0)])},d=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"footer unselectable"},[n("strong",[e._v("Minichat")]),n("br"),n("span",[e._v("Copyright @ 2018 xpfxzxc All Rights Reserved")])])}],m=(n("a481"),{name:"Splash",data:function(){return{second:3}},methods:{redirect:function(){this.$router.replace("login")}},beforeCreate:function(){this.intervalId=0,this.timeoutId=0},mounted:function(){var e=this;this.intervalId=setInterval(function(){e.second-=1,0===e.second&&clearInterval(e.intervalId)},1e3),this.timeoutId=setTimeout(function(){e.$router.replace("/login")},3e3)},beforeDestroy:function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}),h=m,g=(n("734f"),Object(l["a"])(h,p,d,!1,null,null,null)),v=g.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mu-flex",{directives:[{name:"loading",rawName:"v-loading",value:e.logining,expression:"logining"}],staticClass:"login"},[n("div",{staticClass:"top-part unselectable"},[n("span",{staticClass:"version"},[e._v("v1.0.1")]),n("h1",[e._v("Minichat")])]),n("div",{attrs:{id:"login-form"}},[n("div",{staticClass:"card"},[n("mu-card-text",[n("mu-flex",{staticClass:"form-fields",attrs:{"justify-content":"center"}},[n("mu-text-field",{attrs:{placeholder:"昵称","help-text":"昵称为1-10长度的字符",icon:"account_circle"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginNickname(t)}},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)],1)],1),n("mu-flex",{staticClass:"form-btn-group",attrs:{wrap:"wrap"}},[n("mu-button",{staticClass:"form-btn",attrs:{color:"primary",disabled:!e.nickname.trimLeft().length,"full-width":"",large:"",round:""},on:{click:e.loginNickname}},[e._v("昵称登录")]),n("mu-button",{attrs:{"full-width":"",large:"",round:""},on:{click:e.pickRandomNickname}},[e._v("随机昵称")])],1)],1)])},y=[],b=(n("5df3"),n("1c4c"),{name:"Login",data:function(){return{nickname:this.$localStorage.getItemOrDefault("nickname",""),logining:!1}},methods:{pickRandomNickname:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t="0123456789";this.nickname=Array.from({length:8},function(){return e[parseInt(Math.random()*e.length)]}).concat(Array.from({length:3},function(){return t[parseInt(Math.random()*t.length)]})).join("")},loginNickname:function(){var e=this;if(0!==this.nickname.trimLeft().length){this.$localStorage.setItem("nickname",this.nickname),this.logining=!0;var t=function t(){e.$socket.removeListener("connect",t),e.$router.replace("public")};this.$socket.on("connect",t),this.$socket.connect()}}},mounted:function(){this.loginNickname()}}),w=b,I=(n("4fde"),Object(l["a"])(w,k,y,!1,null,null,null)),_=I.exports;r["a"].use(f["a"]);var $=new f["a"]({routes:[{path:"/",name:"splash",component:v},{path:"/login",name:"login",component:_},{path:"/public",name:"public",component:function(){return n.e("chunk-74a6d4fc").then(n.bind(null,"b71b"))}},{path:"/public/online",name:"public-online-list",component:function(){return n.e("chunk-932335c4").then(n.bind(null,"405c"))}}]});$.beforeEach(function(e,t,n){if(["splash","login"].includes(e.name))r["a"].prototype.$socket.disconnect(),n();else if(r["a"].prototype.$localStorage.hasItem("nickname"))if(r["a"].prototype.$socket.connected)n();else{var o=function e(){r["a"].prototype.$socket.removeListener("connect",e),n()};r["a"].prototype.$socket.on("connect",o),r["a"].prototype.$socket.connect()}else n("login")});var x=$,C=n("30f4"),S=n("8055"),O=n.n(S),j=(n("d6f6"),n("d4b8"),n("aa12"),n("4d7d")),E=n("d4ea"),N=n("d1d4"),M=n.n(N),T=(n("394c"),{setItem:function(e,t){localStorage.setItem(e,JSON.stringify(t))},getItem:function(e){return JSON.parse(localStorage.getItem(e))},getItemOrDefault:function(e,t){return this.getItem(e)||t},removeItem:function(e){localStorage.removeItem(e)},hasItem:function(e){return!!localStorage.getItem(e)},clear:function(){localStorage.clear()},key:function(e){return localStorage.key(e)}});n("2095");r["a"].config.productionTip=!1,r["a"].use(C["a"]),r["a"].use(j["a"]),r["a"].use(E["a"],{overlayColor:"rgba(0, 0, 0, .4)",color:"warning",size:70,className:"animated fadeIn slower",text:"连接中......"}),r["a"].use(M.a,{fullscreenEl:!1}),r["a"].prototype.$localStorage=T,r["a"].prototype.$login={nickname:null},r["a"].prototype.$socket=O()("https://minichat777.herokuapp.com/",{secure:!0,autoConnect:!1}),r["a"].prototype.$socket.on("connect",function(){r["a"].prototype.$login.nickname=T.getItemOrDefault("nickname",""),r["a"].prototype.$socket.emit("set_nickname",r["a"].prototype.$login.nickname,function(){})}),r["a"].prototype.$socket.on("disconnect",function(){}),new r["a"]({router:x,render:function(e){return e(s)}}).$mount("#app")},"5c48":function(e,t,n){},"734f":function(e,t,n){"use strict";var r=n("8d6d"),o=n.n(r);o.a},"7c55":function(e,t,n){"use strict";var r=n("5c48"),o=n.n(r);o.a},"8d6d":function(e,t,n){},cb4f:function(e,t,n){e.exports=n.p+"img/welcome.87832a8d.jpg"}});
//# sourceMappingURL=app.6e18fdaa.js.map